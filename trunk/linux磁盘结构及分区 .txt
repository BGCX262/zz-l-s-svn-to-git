系统管理：谈linux磁盘结构及分区  
 
发布时间：2006.06.20 0708     来源：chinaunix    作者： 

1991年，芬兰的一名学生linus torvalds出于兴趣，以他的灵感和才思，开发了当今最为流行的免费操作系统linux。linux也正以它的优越性赢得越来越多的用户的喜爱，同时也被微软视为最可怕的竞争对手之一。全世界使用linux操作系统的人正以惊人的速度增涨着，同时也产生了linux诸多不同的版本，因为它实在是太可爱了，太好了。但这里也不能说它的好了，要不就有骗稿费之疑了。但它有个最突出的特点是它的源代码全都是公开的，这样每个用户或机构就可以根据自己的需要来修改linux，甚至你也可以开发出属于你自己的操作系统。linux也给我国计算机的发展带来了机遇，借助linux的开放性我们可以开发出全中文的操作系统，我们也将不需“洋油”来过日子了。 


由于linux是个自由软件，所以在使用起来不及windows这个商业软件来得上手，但好的是，linux正不断改正这一缺点，现在普通用户也可以轻松地掌握它了。本文就用户在装linux的过程中，所遇到的linux分区问题来详细地介绍一下，这里以red hat linux7.1为例。 


首先我们要对硬盘分区的基本概念进行一些初步的了解，硬盘的分区主要分为基本分区（primary partion）和扩充分区(extension partion)两种，基本分区和扩充分区的数目之和不能大于四个。且基本分区可以马上被使用但不能再分区。扩充分区必须再进行分区后才能使用，也就是说它必须还要进行二次分区。那么由扩充分区再分下去的是什么呢？它就是逻辑分区（logical partion），况且逻辑分区没有数量上限制。 


对习惯于使用dos或windows的用户来说，有几个分区就有几个驱动器，并且每个分区都会获得一个字母标识符，然后就可以选用这个字母来指定在这个分区上的文件和目录，它们的文件结构都是独立的，非常好理解。但对这些用户初上手red hat linux吗，可就有点恼人了。因为对red hat linux用户来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构。red hat linux中每个分区都是用来组成整个文件系统的一部分，因为它采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。下面我们先来看看red hat linux的驱动器是如何标识的。 


对于ide硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指ide硬盘了。“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）,“~”代表分区，前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，hda3表示为第一个ide硬盘上的第三个主分区或扩展分区,hdb2表示为第二个ide硬盘上的第二个主分区或扩展分区。对于scsi硬盘则标识为“sdx~”，scsi硬盘是用“sd”来表示分区所在设备的类型的，其余则和ide硬盘的表示方法一样，不在多说。 


我们从上面可以看到，red hat linux的分区是不同于其它操作系统分区的，它的分区格式只有ext2和swap两种，ext2用于存放系统文件，swap则作为red hat linux的交换分区。那么现在我们就可以知道red hat linux至少需要两个专门的分区（linux native和linux swap）况且不能将red hat linux安装在doswindows分区。一般来说我们将red hat linux安装一个或多个类型为“linux native”的硬盘分区，但是在red hat linux的每一个分区都必须要指定一个“mount point”（载入点），告诉red hat linux在启动时，这个目录要给哪个目录使用。对“swap”分区来说,一般定义一个且它不必要定义载入点。下面我们先对“linux native”和“linux swap”有个初步的了解。 


swap分区是linux暂时存储数据的交换分区，它主要是把主内存上暂时不用得数据存起来，在需要的时候再调进内存内，且作为swap使用的分区不用指定“mout point”（载入点），既然它作为交换分区，我们理所当然应给它指定大小，它至少要等于系统上实际内存的量，一般来说它的大小是内存的两倍，如果你是16mb的内存，那么swap分区的大小是32mb左右，以此类推。但必须还要注意一点，swap分区不要大于128mb，如果你是64mb的内存，那么swap分区最大也只能被定为127mb，再大就是浪费空间了，因为系统不需要太大的交换分区。以此类推，如果你是128mb或更大的内存，swap分区也只能最大被定为127mb。况且你还必须注意的是如果你是128mb（或更大）的内存，你必须提醒系统你有这么大的内存，要不然它可不认你这个128mb内存。具体如下：当顺利启动了安装过程后，会显示一个boot：提示符，这时你只要键入bootlinux mem=128mb就可以了。另外你也可以创建和使用一个以上的交换分区，最多16个。 


linux native是存放系统文件的地方，它只能用ext2的分区类型，上面已说过。对windows用户来说，操作系统必须装在同一分区里，它是商业软件吗!所以你没有选择的余地！对red hat linux来说，你有了较大的选择余地，你可以把系统文件分几个区来装（必须要说明载入点），也可以就装在同一个分区中（载入点是“”）。下面我们看看可以创建哪些分区（仅列常用几种）。 


boot分区，它包含了操作系统的内核和在启动系统过程中所要用到的文件，建这个分区是有必要的，因为目前大多数的pc机要受到bios的限制,况且如果有了一个单独的boot启动分区，即使主要的根分区出现了问题，计算机依然能够启动。这个分区的大小约在50mb―100mb之间。但是如果想用lilo启动red hat linux系统的话，含有boot的分区必须完全在柱面1023以下。又由于8gb后的数据lilo不能读取，所以red hat linux要安装在8gb的区域以内。 


usr分区，是red hat linux系统存放软件的地方，如有可能应将最大空间分给它。 


home分区，是用户的home目录所在地，这个分区的大小取决于有多少用户。如果是多用户共同使用一台电脑的话，这个分区是完全有必要的，况且根用户也可以很好地控制普通用户使用计算机，如对用户或者用户组实行硬盘限量使用，限制普通用户访问哪些文件等。其实单用户也有建立这个分区的必要，因为没这个分区的话，那么你只能以根用户的身份登陆系统，这样做是危险的，因为根用户对系统有绝对的使用权，可一旦你对系统进行了误操作，麻烦也就来了。 


varlog分区，是系统日志记录分区，如果设立了这一单独的分区，这样即使系统的日志文件出现了问题，它们也不会影响到操作系统的主分区。 


tmp分区，用来存放临时文件。这对于多用户系统或者网络服务器来说是有必要的。这样即使程序运行时生成大量的临时文件，或者用户对系统进行了错误的操作，文件系统的其它部分仍然是安全的。因为文件系统的这一部分仍然还承受着读写操作，所以它通常会比其它的部分更快地发生问题。 


bin分区，存放标准系统实用程序。 


dev分区，存放设备文件。 


opt分区，存放可选的安装的软件。 


sbin分区，存放标准系统管理文件。 


上面介绍了几个常用的分区，一般来说我们需要一个swap分区，一个boot分区，一个usr分区，一个home 分区，一个varlog分区。当然这没有什么规定，完全是依照你个人来定的。但记住至少要有两个分区，一个swap分区，一个分区。下面我们来看看怎样分区。 


用户可以使用两种分区工具： 


1．disk druid：它是red hat linux提供的硬盘管理工具，它最初是随red hatlinux5一起发售的，它可以根据用户的要求创建和删除硬盘分区，另外还可以为每个分区管理载入点，这是一个不错的分区软件，建议读者使用。本文也将以此软件详细地介绍red hat linux分区。 


2．fdisk：它是传统的linux硬盘分区工具，比disk druid更强大，使用更加灵活。但是fdisk要求用户对硬盘分区有一定经验，并能够适应且读懂简单的文本界面。如果你是第一次对一个硬盘驱动器进行分区操作的话，最好还是避免fdisk这样的程序，它虽然强大但用起来的感觉不是太好的。 


附注：此外red hat linux还提供了一种叫fips的分区软件，但这种分区软件具有一定的危险性，不宜提倡操作。虽然有许多人已经成功地用fips对他们的硬盘进行了分区，但这不能保证fips将在你的系统中也能正常地运行。况且red hat linux也不提供对fips的支持，劝你对这种分区软件还是慎用为好。 


如果你希望将red hat linux安装在已经含有其他操作系统的盘上，也就是多重操作系统，这个情况就比较复杂了，因为一个错误就可以毁掉你辛辛苦苦保存的数据，让你欲哭无泪。如果你想让red hat linux与os2共存，那你必须使用os2的分区软件来创建硬盘分区，要不然os2将不能识别硬盘分区。另外你也可以用其它的一些分区软件来分区，下面列出了一些常见的这种分区工具软件： 


partition commander软件，从www.v-com.com处下载。 


partition it软件，从www.quarterdeck..com处下载。 


partition magic软件，从www.powerquest.com处下载。 


注意：硬盘分区是一个非常危险的步骤，你要想安全地在不丢失数据的情况下改变磁盘的分区有点不太现实，所以我建议大家对重要得数据进行备份，装多操作系统更要如此，以备不测。当然或许你是刚装系统或就准备重装，那也就是另外一回事了，但是大家对待分区一定要慎重又慎重，切记。 


下面我们详细地了解一下red hat linux7.1自带的disk druid分区软件所包含的一些信息。 


1．current disk partitions区域（这里每一行代表了一个硬盘分区） 


mount point 指出red hat linux启动并运行以后该分区的加载点，交换空间（linux swap）是不需要加载点的。 


device 硬盘分区的设备名 


requeted 给这个分区定义时申请的最小空间 


actual 分配给该分区的实际空间 


type 说明了该分区的类型 


2．drive summaries区域（这里每一行代表一个硬盘） 


drive 显示硬盘的设备名 


geom[chs] 显示硬盘的物理信息，c（柱面），h（磁头），s（扇区） 


total 显示硬盘的可用空间 


used 显示硬盘中已分配的空间 


free 显示硬盘中末分配的空间 


bar graph 该条图形化地显示当前硬盘使用的百分比，#号越少，空闲空间越多 


3．disk druid按钮 


add 增加一个分区 


edit 修改在current disk partitons中被选中的分区的属性，选中该按钮将出现一个对话框来进行修改，但只能修改该分区的载入点。如果你需要修改其它内容，请先删除该分区，而后再重新建这分区。 


delete 删除一个在current disk partitons中被选中的分区 


ok 确认 


back 不作保存，返回 


4.如果你想增加一个分区，请点击“add”按钮，这时会出现一对话框，内容说明如下： 


mount point 分区载入点，说明分区 


size 分区的大小 


grow to fill disk 表明这个分区将添满一个硬盘的整个未分配空间。这时，这个分区的容量可以随着其它分区的修改增加或减少 


type 选择分区类型 


allowable drives 选择这个分区将创建在哪个硬盘上 


好了，通过上面的了解想必大家都能容易地创建出适合自己的分区。下一步我们所要做的工作就是要格式化所建的分区，选择你要格式化的分区并按space键，如果想在格式化分区时检查有无坏块，选择“check for bad blocks during format”,点击ok并按space键。如果分区中已无你要所保存的数据，最好都格式化一下。 

 
